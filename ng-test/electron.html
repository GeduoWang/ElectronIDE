<!DOCTYPE html>
<html ng-app='app'>
<head>
    <title>Electron IDE</title>
    <link rel='stylesheet' href='font-awesome/css/font-awesome.css'>
    <link rel='stylesheet' href='mockup.css'>
    <style type='text/css'>
        #toolbar {
            position: absolute;
            top: 0px;
            left:0px;
            right: 0px;
            height: 50px;
        }
        #filebrowser {
            position: absolute;
            top: 50px;
            left:0px;
            width: 200px;
            bottom: 50px;
        }
        #editor {
            position: absolute;
            top: 50px;
            left:200px;
            right: 300px;
            bottom: 50px;
        }
        #sidebar {
            position: absolute;
            top: 50px;
            right:0px;
            width: 300px;
            bottom: 50px;
        }
        #footer {
            position: absolute;
            height: 50px;
            left: 0px;
            right: 0px;
            bottom: 0px;
        }

        #editor-textarea, #serial-console {
            border: 0px solid green;
            height: 100%;
            padding: 1em;
            background-color: white;
        }

        #toolbar input {
            width: 10em;
        }
        #sidebar input {
            width: 100%;
        }

    </style>
</head>
<body ng-controller='MainCtrl as ctrl'>



<div id='toolbar' class='pane'>
    <div class='inline logo'>Electron</div>

    <div class='inline'>
        <button class='primary' ng-click='ctrl.compile()'>Check <i class="fa fa-check"></i></button><!--  change state-->
        <button class='primary' ng-click='ctrl.run()'>Run <i class='fa fa-play'></i></button><!--  chage state -->
    </div>

    <div class='inline align-right'>
        <button class='primary' ng-click='ctrl.openSettings()'>Settings <i class='fa fa-gear'></i></button>
    </div>

    <div class='inline'>
        <label>Serial Port</label>
        <select ng-model='ctrl.selectedPort' ng-options='p.label for p in ctrl.ports'>
        </select>
    </div>

    <div class='inline'>
        <label>Board</label>
        <input type='text' placeholder='board search' ng-model='ctrl.searchBoard'>
        <select ng-model='ctrl.selectedBoard' ng-options='b.label for b in ctrl.boards'>
        </select>
    </div>
</div>

<div id='filebrowser' class='pane'>
    <div class='pane-title'>File Browser</div>
    <ul class='tree'>

        <li><a href='#'><i class="fa fa-folder-o"></i> foo</a></li>
        <li><a href='#'><i class="fa fa-file-o"></i> bar</a></li>
        <li><a href='#'><i class="fa fa-folder-open-o"></i> foo folder</a>
            <ul>
                <li><a href='#'><i class="fa fa-file-o"></i>
                    sub item 1</a>
                </li>
                <li><a href='#'><i class="fa fa-file-o"></i>
                    sub item 2</a>
                </li>
            </ul>
        </li>
    </ul>

</div>


<div id='editor' class='pane'>
    <div id='editor-title' class='pane-title'>
        <span>MySketch</span>
        <button ng-click='ctrl.openLibrary()' class='align-right action'>add library</button>
    </div>
    <ul id='editor-tabs' class='tab-group'>
        <li ng-repeat='(id, file) in ctrl.files' ng-class='ctrl.getActive(id)'>
            <a href='#' ng-click="ctrl.switchTab(id)">{{file.id}}</a>
        </li>
    </ul>
        <!--
        <li><a href='#' ng-click="ctrl.open('first')">MySketch.ino</a></li>
        <li class='active'><a href='#' ng-click="ctrl.open('second')">Foo.h *</a></li>
        <li><a href='#' ng-click="ctrl.open('third')">Foo.cpp</a></li>
    -->
    <div id='editor-textarea'>
        {{ctrl.editBuffer}}
        </div>
</div>

<div id='sidebar' class='pane'>
    <div class='pane-title'>
        Sidebar
    </div>
    <ul id='editor-tabs' class='tab-group'>
        <li class='active'>Console</li>
        <li>Docs</li>
    </ul>
    <ul class='tab-content-group'>
        <li class='active'>
            <div id='serial-console'>
                <div ng-include="'serial_panel.html'"></div>
            </div>
        </li>
        <li class=''>
            docs
                board info
                library info
                searchable docs
        </li>
    </ul>
</div>

<div id='footer' class='pane'>
    <!--
        status bar: debug messages from compiling.
        opens if errors are found. compiled, uploaded, etc.
    -->
    Compiling....

</div>

<div id='settings-dialog' class='dialog' ng-show='ctrl.settingsVisible'>
    <h3 class='header'>Settings</h3>

    <div class='content'>
        <input type='checkbox'>tracking<br/>
        <input type='radio' name='theme' value='light'>Light<br/>
        <input type='radio' name='theme' value='light'>Dark<br/>
        default board when creating a new sketch
        <select>
            <option>board1</option>
            <option>board2</option>
        </select>
    </div>
    <div class='footer'>
        <button ng-click='ctrl.closeSettings()' class='align-right'>done</button>
    </div>
</div>

<div id='library-search-dialog' class='dialog' ng-show='ctrl.librarySearchVisible'>
    <h3 class='header'>Add Library</h3>
    <div class='content'>
        <input type='text' placeholder='search by name or tag'>
        <button class='primary'>Search</button>
        results<br/>
        results<br/>
        results<br/>
    </div>
    <div class='footer'>
        <button ng-click='ctrl.closeLibrary()' class='align-right'>done</button>
    </div>
</div>





<script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.2.19/angular.js'></script>
<script type='text/javascript'>
angular.module('app',[])
    .controller('MainCtrl', [function() {
        var self = this;
        this.settingsVisible = false;
        this.librarySearchVisible = false;

        this.files = {
            'f1': { id:'MySketch.ino',content: 'contents of file 1' },
            'f2': { id:'Api.h',       content: 'contents of file 2' },
            'f3': { id:'Api.cpp',     content: 'contents of file 3' },
        };
        this.tab = 'f1';
        this.editBuffer = this.files.f1.content;

        this.ports = [
            {id:'cuamodem1234',     label:'Uno'},
            {id:'cuamodem4867',     label:'cuamodem4867'},
            {id:'com1',             label:'Xadow'},
            {id:'@none',            label:'None'},
            {id:'@rescan',          label:'Rescan'},
        ];

        this.selectedPort = this.ports[1];

        this.boards = [
            {id:'uno', label:'Uno'},
            {id:'leonardo',label:'Leonardo'},
            {id:'xadow',label:'Xadow'},
            {id:'@more',label:'More...'},
        ];
        this.selectedBoard = this.boards[0];

        this.openSettings = function() {
            self.settingsVisible = true;
        }
        this.closeSettings = function() {
            self.settingsVisible = false;
        }
        this.openLibrary = function() {
            self.librarySearchVisible = true;
        }
        this.closeLibrary = function() {
            self.librarySearchVisible = false;
        }
        this.compile = function() {
            console.log("compiling");
        }
        this.run = function() {
            console.log("running");
        }

        this.getActive = function(tab) {
            return {
                active: (tab==self.tab)
            }
        }
        this.switchTab = function(tab) {
            self.tab = tab;
            self.editBuffer = this.files[tab].content;
        }
    }]);


</script>

</body>
</html>
